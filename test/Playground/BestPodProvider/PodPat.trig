PREFIX me:         <https://pat.best-pod-provider.com/profile/card#me>
PREFIX my-profile: <https://pat.example.com/profile/card>
PREFIX my-pod:     <https://pat.best-pod-provider.com/pod/>

PREFIX webIdAlice: <https://alice-provider.com/profile/card#me>
PREFIX webIdBob:   <https://bob-provider.com/profile/card#me>
PREFIX webIdCarol: <https://carol-provider.com/profile/card#me>
PREFIX webIdDee:   <https://dee-provider.com/profile/card#me>
PREFIX webIdErik:  <https://erik-provider.com/profile/card#me>
PREFIX webIdFiona: <https://fiona-provider.com/profile/card#me>
PREFIX webIdGreg:  <https://greg-provider.com/profile/card#me>
PREFIX webIdHarry:  <https://harry-provider.com/profile/card#me>
PREFIX webIdIvanna: <https://ivanna-provider.com/profile/card#me>

PREFIX rdf:        <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs:       <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xsd:        <http://www.w3.org/2001/XMLSchema#>
PREFIX foaf:       <http://xmlns.com/foaf/0.1/>
PREFIX vcard:      <http://www.w3.org/2006/vcard/ns#>
PREFIX ws:         <http://www.w3.org/ns/pim/space#>
PREFIX ldp:        <http://www.w3.org/ns/ldp#>
PREFIX dbpedia:    <http://dbpedia.org/resource/>
PREFIX httph:      <http://www.w3.org/2007/ont/httph#>

PREFIX solid:      <http://www.w3.org/ns/solid/terms#>
PREFIX acp:        <http://www.w3.org/ns/solid/acp#>

PREFIX schema:     <http://schema.org/>
PREFIX odrl:       <http://www.w3.org/ns/odrl/2/>
PREFIX dpv:        <http://www.w3.org/ns/dpv#>
PREFIX gconsent:   <https://w3id.org/GConsent#>

PREFIX solid-ext:  <http://www.w3.org/ns/solid/terms/experimental-or-extension#>

PREFIX ex:         <https://example.com#>

# Just made up this visualization vocab to allow us easily size nodes in GraphDB visualizations!
PREFIX viz:        <https://viz.example.com#>

#
# Create a Named Graph for this entire Pod.
# Inside here we actually define the Agent, and their Profile document.
#
my-pod: {
  #
  # Describe this Pod instance (is this allowed to add meta-data for the Named Graph itself?!)
  #
  my-pod: a ws:Storage ;
    rdfs:label "Solid Pod"@en ;
    rdfs:comment "A Solid Pod hosted by Inrupt's ESS product."@en ;
    solid-ext:hasServiceManager my-pod:Service-Manager ;
    viz:nodeSize 0.45 .

  #
  # Describe the Agent using it's WebID as the RDF Subject (e.g., often 'me', as a human being).
  # Points to the Agent's Solid Pod (i.e., back to this Named Graph!).
  #
  me: a schema:Person, foaf:Person ;
    rdfs:label "PatMcB"@en ;
    rdfs:comment "Pat is a human 'agent' from Dublin, and has a Solid Pod!"@en ;
    vcard:fn "Pat McB"@en, "Padraig MacB"@ga ;
    schema:name "Pat McB"@en, "Padraig MacB"@ga ;
    foaf:name "Pat McB"@en, "Padraig MacB"@ga ;
    # solid:account my-pod: ; # NSS might do it, but we have no need for 2 references to storage!
    ws:storage my-pod: ;
    viz:nodeSize 0.85 .

  #
  # Describe my profile card - links back to the Agent's WebID, e.g., 'me', as a human being.
  #
  my-profile: a foaf:PersonalProfileDocument ;
    rdfs:label "Profile document"@en ;
    rdfs:comment "Personal profile document that points to it's 'maker' and 'primary topic'."@en ;
    foaf:maker me: ;
    foaf:primaryTopic me: ;
    viz:nodeSize 0.55 .

  #
  # My bikes...
  #
  my-pod:Bike-Cannondale-EVO a ex:Bicycle ;
    schema:mileageFromOdometer "500km" ;
    schema:purchaseDate "2021/01/01" ;
    schema:size "54cm" .

  my-pod:Bike-Felt-Commuter a ex:Bicycle ;
    schema:mileageFromOdometer "63,000km" ;
    schema:purchaseDate "2014/01/01" .


  #
  # My pets...
  #
  my-pod:Pet-Dog-Bobby a ex:Dog ;
    schema:label "Bobby"@en, "Bobik"@sk ;
    schema:comment "Bobby the wonder dog!"@en ;
    ex:breed "Jack Russel"@en .

  #
  # My properties...
  #
  my-pod:House-Phibsboro a schema:House ;
    rdfs:comment "Lovely end-of-terrace Victorian redbrick overlooking pitch-and-putt coarse."@en ;
    schema:numberOfRooms "8"^^xsd:integer ;
    schema:address "Phibsboro, Dublin 7"@en .


  #
  # My Service Manager.
  #
  my-pod:Service-Manager a solid-ext:ServiceManager ;
    rdfs:comment "Service manager (e.g., for managing my views, transactions, access control, contacts, etc.)."@en ;
    ldp:contains
      my-pod:Service-Notification ,
      my-pod:Service-Consent ,
      my-pod:Service-Owning ,
      my-pod:Service-View ,
      my-pod:Service-Txn .


  #
  # My Notification service...
  #
  my-pod:Service-Notification a solid-ext:Service ;
    rdfs:comment "Service handling notifications."@en .

  #
  # My Consent service...
  #
  my-pod:Service-Consent a solid-ext:Service ;
    rdfs:comment "Service handling Consent (granting, revoking, receipts, etc.)."@en .


  #
  # My Owning service...
  #
  my-pod:Service-Owning a solid-ext:Service ;
    rdfs:comment "Service to manage things I 'own'."@en ;
    ldp:contains
      my-pod:Bike-Cannondale-EVO ,
      my-pod:Bike-Felt-Commuter ,
      my-pod:Pet-Dog ,
      my-pod:House-Phibsboro .


  #
  # My Transaction service...
  #
  my-pod:Service-Txn a solid-ext:Service ;
    rdfs:comment "Service to manage transactions in a Pod, e.g., credit card purchases, house purchases, etc."@en ;
    ldp:contains
      my-pod:Txn-CreditCard-1 ,
      my-pod:Txn-DebitCard-1 ,
      my-pod:Txn-CreditCard-2 ,
      my-pod:Txn-CreditCard-3 .

  my-pod:Txn-CreditCard-1 a schema:BuyAction ;
    rdfs:comment "Purchased groceries at local market."@en .
  my-pod:Txn-DebitCard-1 a schema:BuyAction ;
    rdfs:comment "Bought shoes for kids."@en .
  my-pod:Txn-CreditCard-2 a schema:BuyAction ;
    rdfs:comment "Booked holiday with Ryanair."@en .
  my-pod:Txn-CreditCard-3 a schema:BuyAction ;
    rdfs:comment "Paid electricity bill."@en .


  #
  # My blog...
  #
  my-pod:Blog a schema:Blog, solid-ext:Resource;
    rdfs:label "My Blog"@en ;
    ldp:contains
      my-pod:Blog-Entry-1 ,
      my-pod:Blog-Entry-2 .

  #
  # A single blog entry - but it's a 'complex' entity, with a 'structure' made up of a 'Header' and
  # 'Footer' and attachments, etc.
  #
  my-pod:Blog-Entry-1 a schema:BlogPosting ;
    schema:title "How to Cook for Forty Humans"@en ;
    schema:articleBody "Lisa Simpson - 'Truly there were monsters on that ship, and truly we were them.'"@en ;
    schema:messageAttachment <https://simpsonswiki.com/wiki/How_to_Cook_for_Forty_Humans> ;
    schema:hasPart my-pod:Blog-Entry-1-Structure .
  my-pod:Blog-Entry-1-Structure
    schema:hasPart my-pod:Blog-Entry-1-Structure-Header ;
    schema:hasPart my-pod:Blog-Entry-1-Structure-Footer .
  my-pod:Blog-Entry-1-Structure-Header rdfs:comment "Arbitrary header contents..."@en .
  my-pod:Blog-Entry-1-Structure-Footer
    rdfs:comment "My footer actually has a bike as part of it..."@en ;
    schema:hasPart my-pod:Bike-Cannondale-EVO .
    # Loops are totally fine, SPARQL property paths will not infinitely recurse!
#    schema:hasPart my-pod:Blog-Entry-1 ;
#    ldp:contains my-pod:Blog-Entry-1 .

  my-pod:Blog-Entry-2 a schema:BlogPosting ;
    schema:title "Blog about my new house that I just bought...!"@en ;
    schema:hasPart my-pod:House-Phibsboro .


  #
  # My View service...
  #
  my-pod:Service-View a solid-ext:Service ;
    rdfs:comment "Service to manage all my views over my Pod, e.g., hierarchical, tag-based, etc."@en ;
    ldp:contains
      my-pod:View-Hierarchy-Files ,
      my-pod:View-Hierarchy-Sensitivity ,
      my-pod:View-Tagged .

  #
  # Hierarchical by folder...
  #
  my-pod:View-Hierarchy-Files a solid-ext:View ;
    rdfs:comment "Legacy Solid hierarchy view - folders and files."@en ;
    ldp:contains
      my-pod:Folder-Public,
      my-pod:Folder-Private ,
      my-pod:Folder-Photo .

  my-pod:Folder-Public a ldp:BasicContainer ;
    ldp:contains
      # my-pod:Photo-Dog-1 ,  # REMOVE FOR NOW - It's contained in 'Folder-Photo' too
      my-pod:Photo-Dog-21 ,
      my-pod:Blog .

  my-pod:Folder-Private a ldp:BasicContainer ;
    ldp:contains
      my-pod:My-Current-Location,
      my-pod:Photo-Heart-Scan .

  my-pod:Folder-Photo a ldp:BasicContainer ;
    ldp:contains
      my-pod:Photo-Dog-1,
      my-pod:Photo-Dog-2,
      my-pod:Folder-Photo-Friend .

  my-pod:Folder-Photo-Friend a ldp:BasicContainer ;
    ldp:contains my-pod:Photo-Graduation-43, my-pod:Photo-Dog-2 .

  my-pod:Photo-Dog-1 a schema:Photo ;
    rdfs:seeAlso my-pod:Pet-Dog-Bobby.
  my-pod:Photo-Dog-2 a schema:Photo ;
    rdfs:seeAlso <https://musicart.xboxlive.com/6/cfa9c6d7-0000-0000-0000-000000000009/504/image.jpg?w=1920&h=1080>.
  my-pod:Photo-Dog-21 a schema:Photo ;
    rdfs:seeAlso my-pod:Pet-Dog-Bobby.
  my-pod:Photo-Graduation-43 a schema:Photo .
  my-pod:Photo-Heart-Scan a schema:Photo .

  my-pod:My-Current-Location a schema:Place ;
    rdfs:comment "At home in Dublin, Ireland."@en ;
    schema:longitude "53.3493° N" ;
    schema:latitude "6.2607° W" ;
    schema:location my-pod:House-Phibsboro .

  #
  # Hierarchical by data-sensitivity...
  #
  my-pod:View-Hierarchy-Sensitivity a solid-ext:View ;
    rdfs:comment "Hierarchy view by sensitivity."@en ;
    ldp:contains
      # my-pod:Folder-Public ,  # REMOVE FOR NOW - Cross-references are initially confusing!
      my-pod:Folder-Secret ,
      my-pod:Folder-Confidential .

  my-pod:Folder-Secret a ldp:BasicContainer ;
    ldp:contains my-pod:My-Current-Location .

  my-pod:Folder-Confidential a ldp:BasicContainer ;
    ldp:contains my-pod:Photo-X-Ray-32 .


  #
  # My Tagged View...
  #
  my-pod:View-Tagged a solid-ext:View ;
    rdfs:comment "Manages references to resources I wish to view by tags I've created."@en ;
    ldp:contains my-pod:tag-bike, my-pod:tag-mortgage, my-pod:tag-I-like .

  my-pod:tag-bike a solid-ext:Tag, ldp:BasicContainer ;
    rdfs:comment "Resources I've tagged as being bikes."@en ;
    solid-ext:tagValue "bike"@en ;
    ldp:contains my-pod:Bike-Cannondale-EVO, my-pod:Bike-Felt-Commuter .

  my-pod:tag-mortgage a solid-ext:Tag, ldp:BasicContainer ;
    rdfs:comment "Resources I've tagged as being mortgages."@en ;
    solid-ext:tagValue "mortgage"@en ;
    ldp:contains my-pod:House-Phibsboro.

  my-pod:tag-I-like a solid-ext:Tag, ldp:BasicContainer ;
    rdfs:comment "Resources I've tagged as being things I like!"@en ;
    solid-ext:tagValue "like"@en ;
    ldp:contains my-pod:Bike-Cannondale-EVO .


  #
  # I still like a Named Graph of '<my-pod>/resource/<path>?meta=http', but that's just for
  # 'Resources' - what about 'normal' RDF Subjects (i.e., nodes) (what about Objects that are IRIs?)?
  #
  # Let's say I POST artbitrary RDF payload to '<my-pod>/ingest':
  <https://www.justinbiebermusic.com/profile/card#me> rdfs:label "Justin Bieber" ;
    ex:loves dbpedia:Mickey_Mouse .
  dbpedia:Michael_Jackson schema:birthDate "1958-08-29" ;
    schema:height "213cm" .

  # That should return a 'Location:' header with information about that POST:
  #   Location: <my-pod>/query?subject=my-pod:event-ingest-999
  my-pod:event-ingest-999 a solid-ext:EventIngestRdf ;
    httph:method "POST" ;
    httph:content-type "application/trig" ;
    schema:startTime "10:32am April 1st 2021" ;
#    solid-ext:authUser me: ; # This is correct, but clutters up graph initially...
    solid-ext:receivedRawPayload my-pod:blob-store-1 ;
    # How can we link this POST request to the nodes now in our graph that were contained in it's
    # payload...?
    solid-ext:ingestSubject <https://www.justinbiebermusic.com/profile/card#me>,
      dbpedia:Michael_Jackson .


#
# POST /resourceX
#
# dbpedia:Michael_Jackson ex:loves dbpedia:Mickey_Mouse .
#
# It would seem that the node 'dbpedia:Michael_Jackson' is now orphaned, and that /resourceX is a
# completely meaningless IRI too - i.e., to handle it at all, we need to force a node into our
# graph, which is fine too I guess...
#
# But also to post a 'ldp:contains' triple to it's 'parent resource'
#
# GET /resourceX


  #
  # Access control for my Blog...
  #
  my-pod:Blog acp:accessControl my-pod:acrForBlog .
  my-pod:acrForBlog acp:hasAccessControl my-pod:Blog . # Made up - just to point from ACR back to Node it protects.

  # ACR for Blog - friends can read, controllers can read/write/append.
  my-pod:acrForBlog a acp:AccessControlResource ;
    acp:apply my-pod:myFriendNotNeighbourPolicy ;
    acp:access my-pod:myAccountControllerPolicy.

  my-pod:Blog-Entry-1 acp:accessControl [
    a acp:AccessControlResource ;
    acp:hasAccessControl my-pod:Blog-Entry-1 ;  # Made up - just to point from ACR back to Node it protects.
    acp:apply my-pod:myFriendsFromCollegeAndSchoolInWorkPolicy
  ] .

    #
  # Policies.
  #
  my-pod:myAccountControllerPolicy a acp:AccessControlPolicy ;
    acp:allow acp:Read, acp:Write, acp:Append ;
    acp:allOf my-pod:myMatcherTrusted .

  my-pod:myFriendPolicy a acp:AccessControlPolicy ;
    acp:allow acp:Read ;
    acp:anyOf my-pod:myMatcherFriendCollege, my-pod:myMatcherFriendWork .

  my-pod:myFriendsFromCollegeInWorkPolicy a acp:AccessControlPolicy ;
    acp:allow acp:Read ;
    acp:allOf my-pod:myMatcherFriendCollege, my-pod:myMatcherFriendWork .

  my-pod:myFriendsFromCollegeAndSchoolInWorkPolicy a acp:AccessControlPolicy ;
    acp:allow acp:Read ;
    acp:allOf
      my-pod:myMatcherFriendCollege ,
      my-pod:myMatcherFriendSchool ,
      my-pod:myMatcherFriendWork .

  my-pod:myFriendNotNeighbourPolicy a acp:AccessControlPolicy ;
    acp:allow acp:Read ;
    acp:allOf my-pod:myMatcherFriendCollege, my-pod:myMatcherFriendWork ;
    acp:noneOf my-pod:myMatcherNeighbour .


  #
  # Matchers (all entries are OR'ed - any one match means the Matcher matches).
  #
  my-pod:myMatcherTrusted a acp:Matcher ;
    acp:agent
      webIdHarry: ,
      webIdIvanna: .

  my-pod:myMatcherNeighbour a acp:Matcher ;
    acp:agent
      webIdAlice: ,
      webIdBob: .

  my-pod:myMatcherFriendCollege a acp:Matcher ;
    acp:agent
      webIdAlice: ,
      webIdBob: ,
      webIdCarol: ,
      webIdGreg: .

  my-pod:myMatcherFriendSchool  a acp:Matcher ;
    acp:agent
      webIdAlice: ,
      webIdCarol: .

  my-pod:myMatcherFriendWork a acp:Matcher ;
    acp:agent
      webIdAlice: ,
      webIdDee: ,
      webIdErik: ,
      webIdFiona: ,
      webIdGreg: .
}
